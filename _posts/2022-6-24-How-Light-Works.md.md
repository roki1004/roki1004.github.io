**튜토리얼** : 빛의 작동 원리 & 그림자의 종류
==
[출처 : tutorial-how-light-works-types-of-shadows](https://80.lv/articles/tutorial-how-light-works-types-of-shadows/?fbclid=IwAR39hq0y4ME3h1OLaHULwC9y2saooWXbQvYii5oxsPPS2jzfStHTpB61gvQ)

[Carlos Lemos](https://typhen.artstation.com/resume)의 글을 통해 빛이 무엇인지 알아보고, 빛이 동작하는 방식과 그림자의 형질에 대해서도 들어봅니다.
--

<br>
<br>

![img1](https://cdn.80.lv/api/upload/content/c9/images/62a84a39725ac/widen_920x0.jpeg)

<br>

## **빛이란 무엇일까요?**

만약에 우리가 빛이 어떻게 복제되는지 배우고 싶다면, 우선 현실세계에서 빛이 어떻게 작동하는지 알아야 합니다.

문제는 빛의 작동 방법이 너무 복잡하다는 것입니다. 만약에 빛의 작동 방법을 정확히 복제하려고 한다면, 굉장히 많은 시간이 필요합니다. 그래서 일반적인 접근 방식은 우선 빛을 구성하는 여러 효과들을 분석하고, 그 효과들을 분해하거나 결합해봄으로써 충분히 괜찮아 보이는 결과를 얻는것입니다.

이번 글에서는, 이런 효과들을 요약하고, 약간의 연구를 통해 빛이 어떻게 작동하는지 이해하고, 랜더링에 있어서도 조금 더 발전 할 수 있도록 노력해보려고 합니다. 또한 가급적 단순하게 설명하기 위해 노력하고, 비실시간 GGI, 실시간 CGI 그리고 일러스트레이션으로 빛에 접근하여 모두가 지식을 얻을 수 있도록 진행하겠습니다.

<br>

###### `(번역 주 : 용어 정리는 디지털 그래픽의 특성상 원래 영단어가 실무에서 사용되는 경우가 많아 같이 표시하고, 개인적으로도 익숙해지기 위한 용도입니다.)`
+ ### **용어 정리**
+ *비실시간 : non-realtime*
+ *실시간 : realtime*
+ *일러스트레이션 : illustration*
+ *CGI : Computer-Generated Imagery*

<br>

빛을 여러개의 광선들이라고 생각해봅시다. (물론 실제로는 아니지만 우리가 원하는 것에 가깝다고 할 수 있습니다.) 광원은 그 세계에 흩어 뿌려지는 광선을 방출합니다. 이 광선들이 우리의 눈에 닿을 때, 우리는 그 물체에서 반사되는 빛을 보게 됩니다. 이 행동을 기반으로 Emission (광원으로부터 방출된 빛), Reflection(물체로부터 튕겨나온 빛), Transmission(물체를 통과한 빛), Absorption(물체에 의해 흡수된 빛 : 그 결과로 물체를 데우는)을 정의할 수 있습니다.

<br>

+ ### **용어 정리**
+ *광원 : light source*
+ *광선 : ray*
+ *방사 : Emission*
+ *반사 : Reflection*
+ *투과 : Transmission*
+ *흡수 : Absorption*

<br>

## **Emission**

빛은 광원이 높은 에너지 상태에 있을 때 광원으로부터 방출되고, 더 낮은 에너지 상태가 되기 위해 빛을 방출합니다. 

대다수의 경우, 방사는 백열로부터 옵니다 : 우리는 전기에너지를 사용해 물체를 충전합니다. 그리고 충전된 에너지는 빛으로 사용되거나 다른 재원이 되기도 합니다. (흑체 복사, 형광, 인광, 입자 가속, 방사성 붕괴, 레이저, 화재 등)

시각적으로는 광원과 매우 유사하고 일반적으로 물질과 상호작용하는 방식이 아니라 강도와 색상만 바뀝니다.

<br>

+ ### **용어 정리**
+ *백열 : incandescence*

<br>

![Emission](https://cdn.80.lv/api/upload/content/d9/images/62a7629d231e2/widen_920x0.jpeg)

## **Reflection**

빛은 물체에 부딪혀 튈 수 있고, 우리에게 반사된 빛을 줄 수 있습니다. 우리는 반사광을 2가지 유형으로 분리합니다 :

1. Diffuse Reflection (확산반사) : 광선은 물체의 표면을 약간은 관통 할 수 있습니다. 이 때 물체 표면의 분자와 상호작용을 하고 임의의 방향으로 되돌아옵니다. 빛이 물체와 강하게 상호작용하기 때문에, 빛의 일부가 흡수되어 반사 될 때 색을 가지게 됩니다. 물질 재료의 반사는 대부분 이렇게 작동합니다

![Diffuse Reflection](https://cdn.80.lv/api/upload/content/81/images/62a762e41e3b5/widen_920x0.jpeg)

2. Specular Reflection (정반사) : 빛은 완벽한 각도로 되돌아와서 관찰자 쪽으로 향해 정반사를 생성할 수 있습니다. 빛이 물체와 매우 짧게 상호작용하기 때문에, 일반적으로 물체의 색상을 무시하고 광원의 색을 유지하게 됩니다.

![Specular Reflection](https://cdn.80.lv/api/upload/content/78/images/62a763220480c/widen_920x0.jpeg)

<br>

+ ### **용어 정리**
+ *반사광 : reflected light*
+ *물질 재료 : Material*

<br>

## **Transmission**

만약 광선이 물체를 통과하게 되면, 우리는 다음과 같은 효과를 얻을 수 있습니다.

+ Transparency (투명도) : 광선은 물체를 통과하고 방향이 변하지 않습니다. 현실에서는 대다수의 가스에서 일어납니다.

![Transparency](https://cdn.80.lv/api/upload/content/38/images/62a7636daa13e/widen_920x0.jpeg)

+ Translucency (반투명) : 빛은 통과하는 매질에 따라 다른 속도로 이동할 수 있기 때문에, 다른 특성을 가진 여러 매질을 통과하면 구부러지는 것처럼 보입니다. 현실에서는 물, 유리 등에서 확인 할 수 있습니다.

![Translucency](https://cdn.80.lv/api/upload/content/fa/images/62a7639803ba6/widen_920x0.jpeg)

빛이 물질 재료를 통과할 때의 상대 속도를 굴절률이라고 부릅니다. 굴절은 무지개, 화선 또는 프리즘과 같은 효과를 일으킬 수도 있습니다.

+ Subsurface Scattering (표면하산란 = SSS) : 반투명 물체는 빛을 받아 물체와 강하게 상호작용(색을 가지게됨)하고, 물체의 밖으로 반사되어 물체가 방사되는 것처럼 보이게 합니다. 특히 빛이 물체를 통과할 가능성이 높은 얇은 표면에서 그렇습니다.

![SSS](https://cdn.80.lv/api/upload/content/da/images/62a763d4959c4/widen_920x0.jpeg)

<br>

+ ### **용어 정리**
+ *매질 : medium / mediums*
+ *굴절률 : index of refration*
+ *화선 : 빛이 곡면을 통과하여 굴절되거나 반사될 때 초점이 맞춰지고 생기는 밝은 패턴*
+ ![Caustics](https://help.solidworks.com/2016/korean/SolidWorks/sldworks/vya1450450872046.image)

<br>

## **Absorption**

빛은 에너지이기에 물체에 부딪혔을 때, 에너지가 물체에 흡수되어 온도가 올라갈 수 있습니다. 사실, 물체는 가시광선 뿐만 아니라 비가시광도 흡수할 수 있습니다. (자외선이라던가 적외선이라던가 말이죠)

흡수된 빛은 눈에 보이지 않고 이미지에 영향을 주지 않습니다.

<br>

###### `(번역 주 : 원문에는 reflection과 bounce를 나누어서 쓰고 있습니다. 이를 번역에서는 반사와 튕김으로 번역하였습니다. 반사는 이론적 정의에 가까운 느낌이라면 튕김은 실제 행동을 묘사하는 것으로 인지하였습니다. 앞으로 나오는 모든 반사는 relfection이며 튕김은 bounce입니다.)`

<br>

## **직접광과 간접광**

우리가 첫 번째 빛의 반사를 고려할 때는, 오직 직접광만을 고려합니다 : 물체에서 튀어 카메라로 곧장 들어오는 빛을 말합니다. 하지만 **사실 빛은 모든곳에서 튕기고 또 많이 튕깁니다.** (정확히 입자가 아니라고 한다면 훨씬 더 많이 튕깁니다.)

이런 이유로 우리는 모든곳에서 튕기고 있는 추가 광선들을 대표해 만들어지는 그림자의 매우 어두운 부분을 잘 채우기 위해 화면에 추가 빛을 포함하게 됩니다. 이런 추가 빛을 간접광, 주변광 혹은 전역 조명이라고 부릅니다.

![D and I](https://cdn.80.lv/api/upload/content/6e/images/62a764a203fba/widen_920x0.jpeg)

간접광은 매우 약합니다. : 일반적으로 원래 빛의 첫 번째 튕김으로 18%만 남습니다. 두 번째 튕기고 나면 3.24%만 남게 됩니다. 이렇게 적은양의 빛이 됨에도 불구하고, 완벽히 어두운 표면에서의 아주 작은 빛은 상대적인 차이로 매우 눈에 띕니다.

간접광은 전체 화면, 물체 사이에서의 빛의 튕김, 각 물체의 색상 추가와 같은 이유들 때문에 정확하게 접근하기가 어렵습니다. 가장 일반적인 접근 방식은 다음과 같습니다 :

+ 정확하게 계산하기 : 빛이 화면의 주변에서 어떻게 튕기는지 정확히 추적해서 직접광과 결합합니다. 이 방법은 가장 정확하지만 CGI에서는 매우 느리고 일러스트레이션에서는 정확히 이해하기 어렵습니다.

![Calc Acc](https://cdn.80.lv/api/upload/content/4f/images/62a76500b3a12/widen_920x0.jpeg)

+ 주변색이나 의도색 채우기 : 화면의 그림자 부분을 완전히 어둡게 하는 대신에, 튕겨나온 간접광이 환경광에 영향을 받아 어두운 부분들을 의도적으로 채워서 표현하기 위해 기본 색상을 사용합니다. (기본 색상은 보통 하늘의 색상이나 가장 큰 광원의 색을 사용합니다)

![Add fill](https://cdn.80.lv/api/upload/content/73/images/62a765353df8b/widen_920x0.jpeg)

+ 각 물체별로 기본 색상을 사용 : 일러스트레이션에서 자주 사용되는 기법입니다. 검은 캔버스로 시작해서 각 물체에 빛을 추가하는 대신에, 일반적으로 기본 색상으로 시작해서 그 위에 음영을 추가합니다. 이 방법은 음영 영역이 간접광이 비추는 일부 색상을 유지하여 표면의 기본 색상을 볼 수 있게 합니다.

![Use the base](https://cdn.80.lv/api/upload/content/bc/images/62a7656e97429/widen_920x0.jpeg)

만약 기본 색상에서 시작했고 기본 색상을 인지할 수 있게 유지되는 만큼만 그림자 영역이 어두워지면, 해당 그림자 영역에 도달하는 간접광을 다시 생성합니다.

> **주의** : 어떤 사람들은 알베도 색상이나 확산 색상을 물체의 기본 색상이라고 합니다. 기술적으로는 확산 색상은 음영(빛 + 그림자)를 포함해야하고, 알베도 색상은 빛과 그림자가 없는 평면(Flat) 색상이어야합니다. 하지만 일반적으로 이 두 용어는 구별 없이 사용됩니다.

+ 채움빛을 더하기 : CG에서 우리는 채움빛을 더할 수 있습니다. (떄떄로 채움빛은 주변 색상과 같을 수 있습니다.) 이것은 모든 각도에서 모든 물체를 비추는 빛입니다.

![Fill light](https://cdn.80.lv/api/upload/content/41/images/62a765c87ea63/widen_920x0.jpeg)

비슷한 접근 방식으로 360' 환경 이미지를 캡쳐해서 그림자와 환경 색상을 채우는 채움빛으로 사용하기도 합니다. 예를 들어, 언리얼 엔진에서 Skylight 기능을 사용하여 화면은 캡처하고, 실시간으로 계산된 간접광의 어두운 영역을 채울수 있습니다.

<br>

+ ### **용어 정리**
+ *직접광 : Direct Lighting*
+ *간접광 : Indirect Lighting*
+ *주변광 : ambient light* 
+ *전역 조명 : global illumination*
+ *정확하게 계산하기 : Calculate it accurately*
+ *주변색이나 의도색 채우기 : Add a fill color or ambient color*
+ *하늘의 색상 : sky color*
+ *각 물체별로 기본 색상을 사용 : Use the base color of each object*
+ *알베도 색상 : Albedo Color*
+ *확산 색상 : Diffuse Color*
+ *채움빛 : fill light*

<br>

## **지금까지의 이야기**

그럼, 지금까지 논의한 내용을 가지고 어떻게 이미지를 형성할 수 있을까요? 한 번 해보도록 하겠습니다 :

완전한 어둠에서 시작합니다. 여기에 광원을 환경에 더하고, 직접광을 계산합니다 : 광원에서 빛이 나오고, 환경에서 한 번 튕깁니다. 그리고 카메라를 향합니다. 앞에서 본 것 처럼, 이것이 확산반사와 정반사입니다.

![Diffuse and Spec](https://cdn.80.lv/api/upload/content/0c/images/62a7666b59935/widen_920x0.jpeg)

![Diffuse add Spec](https://cdn.80.lv/api/upload/content/d6/images/62a766706f0a1/widen_920x0.jpeg)

매우 만족스럽지만, 현실의 빛은 한 번 이상 튕기게 됩니다 - 이제 이런 추가 튕김(간접광)들을 화면에 통합해야 합니다. 

![Indirect](https://cdn.80.lv/api/upload/content/11/images/62a7669a484f5/widen_920x0.jpeg)

그리고 튕김 외에도, 빛은 물체를 통과할 수 있습니다 (투과) :

![Transmission](https://cdn.80.lv/api/upload/content/c7/images/62a766ad2a429/widen_920x0.jpeg)

이제 모든것을 결합하면, 우리의 랜더링 결과물을 얻을 수 있습니다.

![Result](https://cdn.80.lv/api/upload/content/36/images/62a766bec8cd6/widen_920x0.jpeg)

이렇듯 빛을 표현하는 데 필요한 것은 직접광(확산 + 정반사), 투과 그리고 간접광의 합입니다. 추가로 화선, 블룸, 모션블러와 같은 몇몇 효과들을 더할수도 있지만, 앞서 말한것들을 기본적으로 염두에 두어야 합니다.

<br>

+ ### **용어 정리**
+ *화선 : caustics*
+ *화선 : 빛이 곡면을 통과하여 굴절되거나 반사될 때 초점이 맞춰지고 생기는 밝은 패턴*
+ *블룸 : bloom*
+ *모션 블러 : motion blur*

<br>

추가로 미디어에 따라, 다음과 같이 다양한 방식으로 접근합니다.

+ 비실시간 CGI : 화면을 향해 광원에서 광선을 던진 뒤, 튕기는 방식을 추적하고 합쳐서 이미지를 생성합니다. (광선 추적)
+ 실시간 CGI : 필요로 하는 정보(색상, 거칠기, 깊이 등)을 포함한 화면의 임시 이미지를 생성하고 화면 설정과 임시 이미지를 사용하여 각 색상을 계산하는 최적화된 수학 공식을 사용합니다.
+ 일러스트레이션 : 일반적으로 확산 색상이 가장 중요하기 때문에 이것으로 시작합니다. 그림자를 더하고(직접 확산 반사와 기본 간접광을 위한 기반을 얻습니다.), 그 위에 정반사를 입힙니다. 마지막으로 원하는 결과물을 얻을 때까지 수정하는 방식입니다.

<br>

###### `(번역 주 : 최근에는 실시간에서도 광선 추적 기술을 사용할 수 있게 되었습니다.)`

<br>

+ ### **용어 정리**
+ *광선 추적 : ray tracing*

<br>

## **빛은 어딘가에 도착해야 합니다**

빛이 물체를 때릴 때, 입사광은 반사되거나 투과되거나(물체를 통과), 또는 흡수됩니다. 그리고 다음 과정동안 유지됩니다 : 입사광은 반사, 투과, 흡수된 빛의 합과 동일합니다. 현실에서는 빛에 영향을 줄수 있는 다른 과정들이 있지만, 랜더링에서는 무시할 수 있습니다.

우선 흡수는 보이지 않기 때문에 물체에서 튕긴 빛의 양을 줄일수 있고, 나머지는 흡수된다고 가정할 수 있습니다. 하지만 아무것도 없이 빛을 생성할수는 없으므로 빛의 감소는 의도적으로 가능하나 증가시킬 수는 없습니다. 이런 이야기들은 법칙을 존중하지 않고 있는 CGI의 오래된 빛 모델들과 관련이 있습니다. 그리고 물체는 사실 자신이 할수 있는 것 보다 더 많은 빛을 반사할 수 있습니다.

<br>

+ ### **용어 정리**
+ *입사광 : incident light*

<br>

## **구체적인 반사 이야기**

빛이 불투명한 물체와 상호작용 할 때, 일부는 물체에 흡수됩니다. (그 결과로 뜨거워지게 됩니다.) 그리고 나머지가 튕겨 나가게 됩니다. 튕긴 빛이 우리의 눈이나 카메라에 도달하면, 우리는 물체를 볼 수 있습니다.

물질 재료에 의해 반사되는 빛의 비율을 알베도라고 부르고, 물질 재료에 따라 그 비율은 광범위합니다.

만약에 비율 100의 알베도를 가진 물질 재료가 있다면, 모든 빛을 반사합니다. 그것은 완벽한 거울일 뿐만 아니라 햇빛에 의한 직접적인 가열이 되지 않기 때문에 매우 차가울 것입니다. 일반적으로 가장 높은 알베도 비율은 갓 내린 눈에서 80정도를 가집니다. 이것이 함축하는 의미는 색상을 선택할 때 100% 순수한 흰색의 표면은 빛을 반사하는게 아니라 빛을 능동적으로 방출하기 때문에 가급적 피하라는 것입니다. 물론, 다른 요소들(화이트 밸런스, 노출, 눈의 적응)도 고려해야 하지만 최우선으로 고려할 것은 순수한 흰색이나 순수한 검정은 피하는게 좋다라는 것을 잊지 맙시다.

빛 반사에는 두가지 주요 유형이 있습니다 : 정반사와 확산반사입니다. 이 둘의 합이 알베도가 됩니다.

**_비금속 물질 재료[=유전체]_** 는 2~5%(평균 4%)의 빛을 정반사 방식으로 반사하고, 더 넓은 범위의 빛을 다음과 같이 반사합니다. : 확산반사 방식으로 0.5~75% (평균 14%). 반사된 빛의 합(정반사 + 확산반사)은 알베도의 값이 됩니다.(평균 18%) 나머지는 물질 재료에 열로 흡수됩니다.

![Non-metal](https://cdn.80.lv/api/upload/content/49/images/62a768443d432/widen_920x0.jpeg)


**_금속_** 은 특이하게도, 정반사 방식으로 50~99%를 반사하고 확산반사는 하지 않습니다.

![metal](https://cdn.80.lv/api/upload/content/64/images/62a76851e2495/widen_920x0.jpeg)

<br>

+ ### **용어 정리**
+ *물질 재료 : Material*
+ *알베도 : Albedo*
+ *비금속 물질 재료 [유전체] : Not-metallic materials [dielectric]*
+ *금속 : metal*

<br>

## **구체적인 확산 튕김 이야기**

<br>

이미 확인했다시피, 확산 튕김에서 광선은 빛과 상호작용하고 임의의 방향으로 되돌아가는 물체의 표면을 약간 관통할 수 있습니다.

<br>

## **확산 튕김은 물체의 색상을 전달합니다.**

확산 튕김에서 빛은 물체의 가장 바깥쪽 층을 관통합니다. 물체는 빛의 일부를 흡수하고 모든 방향으로 빛을 방출합니다. 방출된 빛이 물체에 부분적으로 흡수됨으로써 색상이 됩니다.

![Diffuse Bounce](https://cdn.80.lv/api/upload/content/64/images/62a76895569de/widen_920x0.jpeg)

## **확산 튕김은 모든 방향과 모든곳에 빛을 던집니다.**

<br>

이것은 물체의 특정한 지점이 어디에서 보든 같은 강도의 빛을 갖는다는 것을 의미합니다.

빛에 가장 가까운 물체의 지점은 가장 밝고, 덜 노출된 지점들은 어둡게 될 것입니다. 이것은 시야각이 중요한 정반사 튕김과 구별되는 아주 중요한 부분입니다.

<br>

+ ### **용어 정리**
+ *시야각 : viewing angle*

<br>

![D and S](https://cdn.80.lv/api/upload/content/4f/images/62a768e1ebdb4/widen_920x0.jpeg)

## **표면 거칠기는 확산 튕김과는 관련이 없습니다.**

<br>

확산 튕김으로 인해 빛이 사방으로 흩어지기 때문에, **_표면 거칠기는 확산 튕김과는 관련이 없습니다_** : 붉은 표면에 광택을 내고 매끄럽게 해봅시다. 그래도 여전히 붉은색입니다.

## **구체적인 정반사 튕김 이야기**

<br>

###### `(번역 주 : 원문에서는 bounce라고 되어있으나 여기서는 reflection의 의미로 더 강하게 쓰인것 같아 반사로 번역하였습니다.)`

개인적으로는 정반사 튕김은 <u>반사</u>라는 단어를 생각할 때 머리에 떠오르는 것이기 때문에 이해하기 더 쉬운것 같습니다.

빛은 물체로부터 대칭되는 각도로 돌아오고, 마치 벽을 향해 공을 던진것처럼 관찰자를 향해 정반사를 생성합니다.

![Specular](https://cdn.80.lv/api/upload/content/c6/images/62a76945deb28/widen_920x0.jpeg)

## **정반사는 빛의 색상을 유지합니다.** 

<br>

빛이 물체와 아주 짧게 상호작용하기 때문에, 정반사는 빛의 색상을 유지하고 물체의 색상을 무시합니다. 매끈한 플라스틱 표면을 보면 가장 밝은 부분이 하얀색인 이유입니다 : 플라스틱의 색상이 무엇이든 상관 없이, 정반사는 광원의 색상이기 때문에 항상 빛의 색상(일반적으로 흰색)을 가지고, 정반사의 가장 밝은 부분은 수정하지 않습니다.

![Specular Color](https://cdn.80.lv/api/upload/content/9b/images/62a76981b09ca/widen_920x0.jpeg)

## **정반사의 하이라이트**

<br>

정반사에서는 전체 환경이 반사되지만, **_광원은 환경보다 더 밝기 때문에 우리가 알아차리는 유일한 정반사일 때가 많습니다._** 이렇게 반사된 광원들을 일반적으로 정반사 하이라이트라고 합니다.

![Specular Highlight](https://cdn.80.lv/api/upload/content/ed/images/62a769bb92f10/widen_920x0.jpeg)

<br>

+ ### **용어 정리**
+ *하이라이트 : highlight = 가장 밝은 부분*

<br>

## **정반사는 보기에 따라 다릅니다. (view에 종속)**

<br>

이러한 종류의 반사는 보는각도에 의존합니다 : 우리는 우리가 바라보고 있는 표면의 수직인 빛만 봅니다. 만약 우리가 보는 각도를 변경하면, 하이라이트가 물체를 기준으로 이동하게 될 것입니다. 반사 강도는 보는 각도가 표면과 평행이 될 수록 더 커집니다.

![Spec Highlight](https://cdn.80.lv/api/upload/content/5e/images/62a769f6c0cab/widen_920x0.jpeg)
![Spec View](https://cdn.80.lv/api/upload/content/35/images/62a76a01decca/widen_920x0.jpeg)
![Spec Shape](https://cdn.80.lv/api/upload/content/e6/images/62a76a0b882eb/widen_920x0.jpeg)

## **반사광은 표면의 거칠기에 의존하여 다르게 보입니다.**

<br>

만약 표면이 완벽하게 매끈하다면, 반사된 빛이 원래의 자료와 매우 (마치 거울처럼) 유사할것입니다. 표면이 거칠다면 튕긴 이미지는 흐릿해질 것입니다. 이런 표면들을 표현하기 위해 미세하고 자세한 모델링을 하는 대신에, 컴퓨터는 일반적으로 텍스처나 값을 조정 할 수 있는 거칠기 혹은 매끄러움 값을 사용하여 계산하게 됩니다.

![rough and smooth](https://cdn.80.lv/api/upload/content/e0/images/62a76ab5a2084/widen_920x0.jpeg)

위 이미지에서 모든 구체가 항상 붉은색임을 확인 할 수 있습니다 : 물체의 색상은 표면의 거칠기와 무관한 확산 반사에 의존합니다. (붉은공을 아무리 광택을 내어도 붉은색입니다.) 오직 정반사만이 표면 거칠기에 영향을 받습니다.

거친 표면의 정반사는 빛이 모든 방향으로 흩어지고, 매끄러운 표면은 빛을 보는 사람쪽으로 향하기 때문에 매끈한 표면의 정반사 하이라이트가 더 밝게 보입니다. 빛의 반사량은 같고, 거친 표면이 단순하게 흩어지면서 하이라이트를 크고 어둡게 만듭니다.

<br>

+ ### **용어 정리**
+ *거칠기 : roughness*
+ *매끄러움 : smoothness*

<br>


## **프레넬 효과**
###### `(번역 주 : 못(pool)인데 뒷 문장에 해저(sea floor)가 나오는게 조금 이상하긴 합니다.)`
자 이제 돌과 물로 가득찬 못이 있다고 생각해봅시다. 돌을 아주 높은곳에서 단순히 물속으로 떨어뜨려봅시다. 튕기나요?

물론 아니겠죠. 그저 단순히 물을 통과해서 해저로 떨어지게됩니다. 하지만 만약 각도를 변경해서 던지면 어떨까요? 45'까지는 아마도 돌은 여전히 물속으로 떨어질 것입니다. 하지만 아주 낮은 각도라면 돌이 튕길 것입니다. (물 수제비를 말하고 있습니다.) 돌의 이동 방향이 거의 평행을 이루는 각도가 되면 표면을 통과하는 것보다 튕길 가능성이 더 높습니다.

정반사 튕김의 경우라면, 빛에서도 같은 일이 일어납니다.

> 만약에 우리가 광선을 표면에 수직으로 쏜다면, 빛은 튕김보다는 표면에 흡수될 가능성이 더 높습니다. 하지만 만약에 광선을 표면에 거의 평행하게 쏜다면, 튕기고 정반사도 생성할 가능성이 높습니다.

![Fresnel](https://cdn.80.lv/api/upload/content/29/images/62a76b5da7550/widen_920x0.jpeg)

이것을 프레넬 효과라고 부르고, 기본적으로 끝각에서 볼 때 표면이 더 정반사한다는 것을 의미합니다. 이러한 연유로 정반사도(')는 다른 각도보다는 수직 시야각에서 계산됩니다. (흔히 f0이라고 합니다.)

프레넬 이펙트의 가장 명확한 예중 하나가 물입니다 : 우리가 물의 표면을 수직으로 내려 보면, 그 곳은 투명하고 물속에 있는 것들도 볼 수 있습니다. 그리고 물을 수평적으로 바라본다면 (바다의 수평선처럼 말이죠), 좀 더 정반사가 일어나서, 물이 마치 거울처럼 빛을 반사합니다.

![example water](https://cdn.80.lv/api/upload/content/c1/images/62a76baf69db7/widen_920x0.jpeg)

위의 이미지에서 우리는 바위 근처를 볼 때는 물을 통과해 그 안을 볼 수 있지만 먼 쪽을 보게 되면 물이 프레넬 효과를 가지고 있기 때문에 반사가 더 강해집니다. 프레넬 효과는 평행하게 바라보았을 때 더 반사가 강해지고, 수직으로 바라볼 때 정반사가 더 약하게 일어납니다.

<br>

+ ### **용어 정리**
+ *프레넬 효과 : Fresnel Effect*
+ *끝각 : Extreme angle / 0이나 180도 같은 각의 끝부분*

<br>

## **금속**

<br>

금속 물체는 특이합니다. 금속은 매우 매우 밀도가 높습니다. 너무 조밀해서 현실에서 금속이 투명해지는 것은 거의 불가능합니다. (100개의 넓은 원자를 가질 수 있는 금조차도 여전히 불투명합니다.)

빛이 금속 표면을 때리면, 거의 대부분 반사됩니다 : 대부분의 물질 재료가 많은 양의 확산 반사를 가지고 적은 양의 정반사를 가지는 반면, 금속은 많은 양의 정반사를 가지고 확산 반사는 가지지 않습니다. 빛은 단순히 금속 표면 내부로 들어가 금속 원자와 상호 작용 할 수 없고, 부분적으로 흡수 되어 확산 튕김으로 나갈수 없습니다. 대신에 그냥 튕겨져 나갑니다. 금속 물체는 50~99.8%는 정반사가 일어나고, 나머지만이 흡수됩니다.

![Metal](https://cdn.80.lv/api/upload/content/e6/images/62a78592d8618/widen_920x0.jpeg)

거울은 무슨 색일까요? 거울은 금속으로 만들어져있고 빛의 대부분을 정반사 방법으로 반사하기 때문에 답을 말하기가 어렵습니다.

몇몇 금속은 (금이나 동 등)과 같이 반사되는 빛이 색을 가지는 것처럼 만들기 위해 약간의 색상을 추가 할수도 있지만 실제로는 반사되는 빛의 색상을 수정하는 것일 뿐입니다 : **_정반사 하이라이트는 비금속 표면에서 빛의 색상을 유지하지만, 금속 표면에서는 변경할 수 있습니다._**

금속 표면들의 경우 표면의 대부분이 환경을 반사하기 때문에, 그들의 모습은 환경과 시야각에 따라 크게 다를 수 있습니다. 그 결과 그리기가 매우 힘들고 만약에 3D에서 정확하게 랜더링하기를 원한다면, 전체 화면을 "다시 랜더링"해야만 합니다. 일반적인 해결방법은 반사를 매우 흐리게 만들고, 모든 환경에서 맞지 않을 수 있는 구별 가능한 세부 사항들을 회피하기 위해 이런 금속 부분들을 아주 거칠게 만드는 것입니다.

![Metal rough](https://cdn.80.lv/api/upload/content/0a/images/62a785edd7004/widen_920x0.jpeg)

## **투과**

<br>

광선이 물체에 닿으면, 광선은 물체를 통과할 수 있습니다. 이 과정은 여러 이름으로 불리고 있습니다. 그 중에서 광선 추적 CGI에서 사용되는 용어인 투과를 사용하기로 결정했습니다.

###### `(번역 주 : 물체가 물이 묻기 전에는 밝았는데, 물이 묻으면 빛이 물체에 닿지 못해 더 어둡게 보인다는 뜻입니다.)`
**_빛을 보존해야_** 함을 명심하세요 : 만약에 투명한 물체가 반사를 하거나 색을 가지고 있다면, 물체를 통과 한 후에는 더 어두워야 합니다. 예를 들어 표면이 젖으면, 표면에 있는 물때문에 정반사가 강해집니다. 정반사로 닿아야 하는 빛이 물체에 닿지 못하고 물체를 더 어둡게 보이게 하는 확산반사에 기여하지 않습니다.

투과는 다양한 형태를 취할 수 있습니다.

## **반투명**

빛이 속성이 다른 여러개의 매질를 통과할 때, 구부러지는 것처럼 보입니다. 현실에서는 물이나 유리 등에서 나타납니다.

빛은 통과하는 매질에 따라 다른 속도로 이동 할 수 있습니다. 빛의 속도는 약 299,792,458m/s이지만 진공상태일 때 그렇다는 것을 기억하세요. 매질을 통과하는 동안 매질의 굴절률에 따라 속도가 느려 질 수 있습니다. (100% 맞는 것은 아니지만 상대성 이론은 건너뛰도록 하죠.)

![Translucency](https://cdn.80.lv/api/upload/content/f0/images/62a786983cbc7/widen_920x0.jpeg)

몇몇 매질에서는 빛이 공기중에서보다 더 빨라지거나 느려져서, 매질을 통과할 때 입사 광선이 구부러질 수 있는 굴절이 일어날 수 있습니다.

![Refraction](https://cdn.80.lv/api/upload/content/c6/images/62a786d17fa7c/widen_920x0.jpeg)

무겁게 압축된 공기는 평범한 공기보다 밀도가 높고 빛이 더 천천히 통과합니다. 이것이 폭발이 시각적 충격파를 만들 수 있는 이유입니다 : 충격파의 공기가 더 밀도가 높아서, 무겁게 압축된 공기와 평범한 공기 사이에서 굴절 효과를 얻게됩니다.

완벽히 반투명한 물체는 보이지 않지만, 빛을 구부러트려 뒤에 있는 물체가 보이는 방식을 변경하기 때문에 여전히 인식할 수 있습니다.

굴절은 무지개, 프리즘, 무지개 빛깔 등과 같은 효과들도 일으킬 수 있습니다.

<br>

+ ### **용어 정리**
+ *투과 : Transmission*
+ *광선 추적 : ray tracing*
+ *CGI : Computer-Generated Imagery*
+ *반투명 : Translucency*
+ *입사 광선 : incident light ray*

<br>

## **투명도**
광선이 물체를 통과해도 방향은 변하지 않습니다. 현실 속 대부분의 가스에서 볼 수 있는 현상입니다. 완벽히 투명한 물체는 보이지 않겠지만, 부분적으로 투명한 물체는 보일 것입니다.
###### `(번역 주 : 사실 유리잔을 투명하다고 부르지만 눈에 보이므로 사실은 부분투명이라는 뜻입니다.)`

![Transparency](https://cdn.80.lv/api/upload/content/6d/images/62a7872714613/widen_920x0.jpeg)

부분적으로 투명한 물체는 확산 색상을 통해 뒤의 개체에 색조를 지정합니다. 이런 투과 형태는 대부분 CGI의 저렴한 반투명 방법으로써 사용됩니다 : 현실에서는 거의 모든 물체는 1(공기)와는 다른 굴절률을 가지며 어떤 방식으로든 빛을 구부립니다.

<br>

+ ### **용어 정리**
+ *투명도 : Transparency*

<br>

## **표면하산란**
표면하산란은 확산반사와 반투명의 혼합입니다 : 빛은 물체를 관통해서 확산반사로 물체의 내부에서 반사를 시작하고 그 물체의 다른 방향으로 나올 수 있습니다. 특히 표면의 얇은 부분에서 빛이 물체를 통과할 가능성이 더 높습니다.

![SSS](https://cdn.80.lv/api/upload/content/fb/images/62a7874e05c32/widen_920x0.jpeg)

표면하산란은 (흩어져 있는 광선 때문에 생긴)물체의 확산 색상과 (물체를 통과한 광선 때문에 생긴)빛의 색이 혼합되어 착색됩니다. 표면하산란은 그림자가 있는 쪽에서 보았을 때 표면을 방사형으로 보이게 할 수 있으며, 때때로 방사형 물질 재료로 흉내내기도 합니다.

<br>

+ ### **용어 정리**
+ *표면하산란 : Subsurface Scattering : SSS*
+ *방사형 물질 재료 : Emissive Material*

<br>

## **광원의 결합**

<br>

만약에 우리가 서로 다른 광원들을 가지고 있다면 어떻게 합칠 수 있을까요?

만약에 우리가 4개의 광원이 켜진 사진을 가지고 있고 각각의 빛만 켜진 4개의 사진(혹은 랜더)도 가지고 있다면, 우리는 단순히 개별 사진을 합치는 것만으로 같은 결과를 만들어낼 수 있을까요?

![combine 4](https://cdn.80.lv/api/upload/content/7a/images/62a7878ddfa89/widen_920x0.jpeg)
![each light](https://cdn.80.lv/api/upload/content/14/images/62a7879d25f61/widen_920x0.jpeg)

물론입니다.

![photoshop](https://cdn.80.lv/api/upload/content/b7/images/62a787c0a9a68/widen_920x0.jpeg)

만약에 우리가 빛이 모두 켜진 상태로 이미지를 비교한다면, 기본적으로 같은 이미지를 볼 수 있습니다. **_이것은 우리가 각각의 광원으로 나누어서 작업을 한 뒤에 합쳐도 괜찮다는 것을 의미합니다. 광원은 선형적으로 합칠 수 있습니다._**

그런데 또 말이죠, 다른 광원의 빛을 추가 할 수 있는 반면에, 우리의 **_눈은 우리가 보고 있는 빛의 양에 적응하고,_** 특정 임계값을 초과하면 다른 냄새에 집중하기 위해 강한 냄새를 그만 맡는 것처럼 눈도 재적응을 한다는 사실을 기억해야 합니다.

이것이 100% 흰색을 피해야만 하는 또 다른 이유입니다 : 우리의 눈은 빛 수용체가 넘쳐서 볼 수 없는 정보를 잃지 않도록 적응해 버릴 것입니다.

## **그림자**

<br>

CGI에서는 일반적으로 전체 화면을 검은색으로 시작하고 빛을 추가하기 시작합니다. 하지만 보통 일러스트레이션을 할 때는 확산 색상으로 시작하여 빛과 그림자를 모두 추가합니다.

![Shadow](https://cdn.80.lv/api/upload/content/68/images/62a788636db6b/widen_920x0.jpeg)

그림자는 빛의 결핍 된 것입니다. 표현 방법에 따라 그림자는 세개의 그룹으로 나누어집니다.

###### `(번역 주 : 미묘(subtle)하다고 적혀있습니다. 그림자의 모양에 관한 것 같습니다.)`
+ 형태 그림자 - 빛의 노출이 적어서 물체의 표면에 단순하게 생성된 그림자. 형태 그림자는 확산반사가 부족해서 시작됩니다 : 물체에서 빛에 노출된 부분은 반사가 일어나지만 노출이 적은 부분(빛에서 멀어지는 방향)은 그렇지 않고 어두워 질 것입니다. 이런 그림자들은 일반적으로 매끈하고 미묘하며 물체의 부피에 관한 많은 정보를 줍니다.

![Form Shadow](https://cdn.80.lv/api/upload/content/a7/images/62a788ab6077b/widen_920x0.jpeg)

+ 투사 그림자 - 물체 혹은 물체의 일부가 광원과 다른 물체 사이에 있을 때 생성되는 그림자. 같은 물체에만 영향을 주는 형태 그림자와 달리, 투사 그림자는 근처 물체들에게 영향을 주어 광원으로부터 그 물체들을 차단할 수 있습니다. 이런 그림자는 일반적으로 더 강하고 형태 그림자보다 덜 미묘하며 화면에서 물체의 위치에 대한 정보를 줍니다.

![Cast Shadow](https://cdn.80.lv/api/upload/content/e7/images/62a788ebce9cf/widen_920x0.jpeg)

+ 주변 폐색 - 물체가 다른 물체와 가까워질 때, 빛이 그 물체들의 사이 공간에 덜 도달하면 그 공간이 더 어둡게 보입니다. 우리는 이런 공간들을 어둡게 표현함으로써 효과를 흉내 낼 수 있습니다. 일반적으로 실시간 환경에서 화면 주변의 빛 튕김을 흉내내는 갑싼 방법으로 사용합니다. 원래는 매우 비용이 많이 드는 효과입니다. 현실에서 주변 폐색은 형태 그림자와 투사 그림자를 혼합하지만, 우리는 우리의 화면을 더 창의적으로 제어하기 위해 분리합니다.

![AO](https://cdn.80.lv/api/upload/content/4e/images/62a789139b1a2/widen_920x0.jpg)

여러 광원을 함께 결합할 수 있는 것처럼, 여러 광원에서 생성된 그림자들도 겹칠 수 있고 더 어두워집니다.

하지만 단일 광원은 겹치는 그림자를 생성 할 수 없습니다.(빛을 그릴 때 우리가 종종 실수하곤 하죠.) 각 광원은 각자의 그림자 묶음을 생성합니다. **_같은 광원에 의해 형성된 형태 그림자와 투사 그림자는 겹쳐질 수 없고 합쳐집니다._**

![Shadows](https://cdn.80.lv/api/upload/content/f8/images/62a78947bb230/widen_920x0.jpeg)

<br>

+ ### **용어 정리**
+ *형태 그림자 : Form Shadows*
+ *투사 그림자 : Cast Shadows*
+ *주변 폐색 : Ambient Occlusion*

<br>

## **그림자가 항상 어두운것은 아닙니다.**

<br>

간접광 덕분에 빛은 어디서나 튕깁니다. 이 빛의 일부는 그림자 영역에 도달하고 관찰자에게 되돌아가서 우리가 그림자 영역의 색상을 볼 수 있게 합니다.

**_그림자가 진 영역의 밝기는 우리의 화면에 간접광이 얼마나 많은가에 따를 것입니다_** : 사막은 오직 하나의 광원만 있으며 빛을 반사하고 그림자를 색으로 채울수 있는 건물, 나무, 그외 다른 물체가 없습니다 : 간접광이 거의 없으며 (항상 일부만 있을 것 입니다.) 그림자는 어두워 보이고 색상도 거의 없습니다.

![Desert](https://cdn.80.lv/api/upload/content/a5/images/62a789916d721/widen_920x0.jpeg)

위 그림에 나오는 여성의 그림자는 오직 하나의 광원(태양)만 있고 햇빛을 튕겨서 채울수 있는 표면이 없기 때문에 매우 어둡습니다.

반면에, 구름낀 흐린날에는 구름이 빛을 사방으로 튕겨서 그림자가 튕긴 빛으로 채워지고, 그 결과 그림자가 사라져 보이는 지점까지 갈 수도 있습니다.

![Cloudy](https://cdn.80.lv/api/upload/content/11/images/62a789b7a3c5d/widen_920x0.jpeg)

위 그림의 여성은 거의 그림자가 없습니다 : 건물, 구름 그리고 비가 사방에서 빛을 반사중입니다.

그림자를 드리우는 별도의 광원이 있을 때, 그 **_그림자들은 겹칠 수 있습니다._** 현실에서는 대부분 하나의 광원(태양)을 가져서, 여러개의 몇몇 광원으로부터 생성된 겹치는 그림자를 가지는게 자연스럽지 않게 보이고, 가급적 그런 상황을 피하거나 그런 그림자들은 부드럽게 처리하려고 노력합니다.

![Overlap shadow](https://cdn.80.lv/api/upload/content/b0/images/62a78a4307d7b/widen_920x0.jpeg)

이런 효과를 피하기 위해, 빛의 전문가는 부드러운 그림자를 만들어주는 더 큰 광원(예를 들어 창문이나 큰 조명)을 사용하거나 모든 방향으로 빛을 산란시키는 변류기를 사용합니다.
###### `(번역 주 : 빛을 산란시키는 장치를 사용한다고 이해하면 좋을 것 같습니다.)`

<br>

+ ### **용어 정리**
+ *변류기 : deflector*
+ *변류기 : 전류의 크기를 변환하는 장치*

<br>

## **그림자는 매끈하거나 단단한 가장자리를 가질 수 있습니다.**

<br>

투사 그림자는 테두리의 매끄러움 정도가 다를 수 있습니다. 필자의 생각에는 그림자와 그림자를 드리우는 물체 사이의 거리에 의존하는것 같았는데 제가 조금 틀렸습니다.

태양과 같은 직접광의 경우에는 모든 광선은 평행합니다. (태양은 지구에서 아주 멀기 때문에 광선이 우리에게 닿을 때 거의 평행합니다.) 이런 직접광은 단단한 그림자를 생성합니다.

![Edge](https://cdn.80.lv/api/upload/content/56/images/62a78a958ae8f/widen_920x0.jpeg)

하지만, **_물체에 더 가까운 광원을 가지고 있으면 그림자는 더 매끄럽게 표현됩니다._**

우리가 물체에 더 가까워지면, 광선이 다른각도에서 물체에 도달하여 그림자를 부드럽게 합니다. 광원에서 가장 멀리 떨어져 있을수록 그림자가 이런 현상을 일으킵니다. 왜냐하면 가장자리의 광선이 더 먼거리를 이동하고, 약간 다른 각도로 이동하기 때문에 그림자가 더 분리되기 때문입니다.

![Smooth shadow](https://cdn.80.lv/api/upload/content/c4/images/62a78ac58dc38/widen_920x0.jpeg)

참고로, 태양에서 나온 광선은 거의 완벽하게 평행하지만 1~1.5' 정도의 편차를 가지고 있습니다. 그래서 그림자를 드리우는 물체에서 먼거리쪽에 직사광선의 부드러운 그림자를 볼 수 있어야 합니다. 광원의 크기가 증가함에 따라 그림자도 부드러워집니다.

![sunlight](https://cdn.80.lv/api/upload/content/c4/images/62a78ae63bf17/widen_920x0.jpeg)

햇빛이 대부분 평행하면, 창문을 통해 들어오는 빛도 평행한 광선이라고 생각할 수 있습니다. 하지만 모든 방향에서 창문을 통과해 들어오는 간접광과 회절도 고려해야 합니다.

<br>

+ ### **용어 정리**
+ *직사광선 : direct sunlight*
+ *회절 : diffraction*
+ *회절 : 우리말로 에돌이라고 합니다. 음파나 전파 또는 광파등이 장애물이나 좁은 틈을 통과할 때, 파동이 그 뒤편까지 전파되는 현상을 말합니다.* 
+ <img width="250" src="https://image.shutterstock.com/image-vector/wave-diffraction-diagram-wide-gap-600w-1600259320.jpg" alt="diffraction" title ="Diffraction">

<br>

## **결론**

<br>

이 튜토리얼에서 우리는 화면을 랜더링할 때 잊지 말아야 할 주요 빛의 효과를 살펴보았습니다 : 방사, 직접광과 간접광의 튕김(정반사와 확산 반사)그리고 투과와 흡수.

또한 우리는 금속 물체, 굴절 그리고 몇몇 광원과 그림자의 결합과 같은 몇가지 효과들을 확인했습니다. 

이제 우리는 화면을 랜더하는데 필요한 여러 부분들을 알게 되었음으로, 앞으로는 (광선 추적을 사용한)비실시간, (레스터화를 사용한)실시간 그리고 (그림에 사용되는 주요 음역 테크닉을 살펴보는)일러스트레이션의 여러 부분들에 어떻게 접근해야 하는지에 대해서 더 자세히 알면 좋을 것 같습니다.

튜토리얼이 생각했던것 보다 더 길어졌지만, 연구하는 동안 예상했던 것 보다 더 많은 것을 배웠습니다. 각 부분을 끝내는데 얼만큼의 시간이 필요할지 확신할수는 없어도 행운을 빌어주세요!

지금까지 읽어주셔서 감사하고, 유용했기를 바랍니다. 빛에 관해 좀 더 배우고 싶다면 [Light for Visual Artists by Richard Yot](https://richardyot.com/light-for-visual-artists-page)이라는 책을 강력하게 추천드리겠습니다.

###### `(번역 주 : Carlos Lemos의 다른 튜토리얼을 보고 싶다면 [이곳](https://www.artstation.com/typhen/blog)을 클릭하세요.)`

[Carlos Lemos](https://typhen.artstation.com/resume), 3D Artist
